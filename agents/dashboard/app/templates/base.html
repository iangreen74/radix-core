<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ settings.dashboard_title }}{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    {% block head %}{% endblock %}
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon">&#9662;</span>
                <span class="logo-text">Radix Core</span>
            </div>
            <span class="version">v0.1.0</span>
        </div>
        {% if settings.cluster_name %}
        <div class="sidebar-cluster" style="padding: 8px 20px; border-bottom: 1px solid var(--border); font-size: 12px; color: var(--text-secondary);">
            <span style="color: var(--text-muted); text-transform: uppercase; font-size: 10px; letter-spacing: 0.5px; display: block; margin-bottom: 2px;">Cluster</span>
            <span style="font-weight: 600;">{{ settings.cluster_name }}</span>
        </div>
        {% endif %}
        <ul class="nav-links">
            <li class="{% if page == 'overview' %}active{% endif %}">
                <a href="/overview">
                    <span class="nav-icon">&#9632;</span>
                    Overview
                </a>
            </li>
            <li class="{% if page == 'jobs' %}active{% endif %}">
                <a href="/jobs">
                    <span class="nav-icon">&#9654;</span>
                    Jobs
                </a>
            </li>
            <li class="{% if page == 'metrics' %}active{% endif %}">
                <a href="/metrics">
                    <span class="nav-icon">&#9650;</span>
                    Metrics
                </a>
            </li>
            <li class="{% if page == 'health' %}active{% endif %}">
                <a href="/health">
                    <span class="nav-icon">&#9679;</span>
                    Health
                </a>
            </li>
        </ul>
        <div class="sidebar-footer">
            <div class="env-badge">
                <span class="badge badge-info">{{ settings.radix_license_mode }}</span>
                <span class="badge badge-muted">{{ settings.radix_namespace }}</span>
            </div>
            {% if settings.build_commit or settings.build_branch %}
            <div class="build-info" style="margin-top: 10px; font-size: 10px; color: var(--text-muted); line-height: 1.6;">
                {% if settings.build_commit %}
                <div>{{ settings.build_commit[:7] }}</div>
                {% endif %}
                {% if settings.build_branch %}
                <div>{{ settings.build_branch }}</div>
                {% endif %}
                {% if settings.build_timestamp %}
                <div>{{ settings.build_timestamp }}</div>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </nav>

    <main class="content">
        <header class="page-header">
            <h1>{% block page_title %}Dashboard{% endblock %}</h1>
            <div class="header-actions">
                {% block header_actions %}{% endblock %}
            </div>
        </header>

        {% if system_status is defined and system_status %}
        <div class="status-banner status-banner-{{ system_status }}" style="padding: 8px 32px; font-size: 13px; font-weight: 600; display: flex; align-items: center; gap: 8px;
            {% if system_status == 'operational' %}background: rgba(34, 197, 94, 0.1); color: var(--ok); border-bottom: 1px solid rgba(34, 197, 94, 0.2);
            {% elif system_status == 'degraded' %}background: rgba(245, 158, 11, 0.1); color: var(--warn); border-bottom: 1px solid rgba(245, 158, 11, 0.2);
            {% else %}background: rgba(239, 68, 68, 0.1); color: var(--error); border-bottom: 1px solid rgba(239, 68, 68, 0.2);
            {% endif %}">
            <span style="font-size: 8px;">&#9679;</span>
            {% if system_status == 'operational' %}Operational
            {% elif system_status == 'degraded' %}Degraded
            {% else %}Down
            {% endif %}
        </div>
        {% endif %}

        <div class="page-content">
            {% block content %}{% endblock %}
        </div>
    </main>

    {% block scripts %}{% endblock %}
</body>
</html>
